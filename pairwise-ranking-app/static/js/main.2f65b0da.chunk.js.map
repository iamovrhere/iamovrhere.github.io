{"version":3,"sources":["lib/localStorage.js","contexts/Profile/actions.js","contexts/Profile/reducers.js","contexts/Profile/index.js","components/common/common.style.js","components/SelectProfile/SelectProfile.style.js","components/SelectProfile/SelectProfileComponent.js","components/SelectProfile/index.js","lib/index.js","contexts/Profile/ProfileStructure.js","contexts/Profile/middleware.js","components/EditProfile/EditProfile.style.js","components/EditProfile/EditProfileComponent.js","components/EditProfile/index.js","components/common/LinearProgressBar/LinearProgressBarComponent.js","components/common/LinearProgressBar/index.js","components/PairVote/BallotCard/BallotCardComponent.js","components/PairVote/BallotCard/index.js","components/PairVote/PairVote.style.js","components/PairVote/PairVoteComponent.js","components/PairVote/PairVoteContainer.js","components/PairVote/index.js","components/ViewList/ViewList.style.js","components/ViewList/ResultTable/EnhancedTableHeadComponent.js","components/ViewList/ResultTable/EnhancedTableToolbarComponent.js","components/ViewList/ResultTable/ResultTable.style.js","components/ViewList/ResultTable/ResultTableRowComponent.js","components/ViewList/ResultTable/ResultTableComponent.js","components/ViewList/ResultTable/index.js","lib/export.js","components/ViewList/ViewListComponent.js","components/ViewList/index.js","app/routes.js","app/App.js","app/reportWebVitals.js","contexts/App.js","index.js"],"names":["valueCache","PROFILE_ADD","PROFILE_SET_CURRENT","PROFILE_RESTORE_STATE","PAIR_VOTE","PAIR_SKIP","LIST_RESET_ROWS","addProfile","newProfileId","name","nameMap","pairList","type","data","resetListRows","reducer","state","action","profileState","currentProfileId","id","profiles","Error","currentProfile","profileReducer","rootReducer","updatedAtTime","Date","getTime","newProfile","list","dateTime","pairs","totalComparisons","length","skipProfile","pairReducer","pairIndex","voteProfile","listReducer","winnerListId","resetRowsProfile","listId","voteListRow","score","resetPairs","filter","pair","index","findIndex","pairCheck","rid","pairNext","splice","pairSkip","skipped","getCurrentProfile","getPairs","createSelector","profile","getListValues","Object","values","getMaxScore","listValues","reduce","max","item","getTotalComparisons","getProgress","total","getUpdatedAtTime","initialState","ProfileContext","React","createContext","ProfileProvider","props","key","initialValue","useReducer","dispatch","rawItem","window","localStorage","getItem","JSON","parse","error","console","getValue","value","valueString","stringify","setItem","storageState","setStorageState","useState","refreshTime","setRefreshTime","storedProfile","shouldRestoreState","isStorageStale","storedUpdatedAt","currentUpdatedAt","now","checkIfStorageStale","shouldSaveState","useEffect","setInterval","a","asyncSetStorage","Provider","children","AppTheme","createMuiTheme","palette","primary","main","secondary","colors","orange","breakPoint","mediumAndSmaller","CommonButton","styled","Button","PrimaryButton","attrs","variant","color","OptionalButton","CancelButton","PrimaryFab","Fab","blockMargin","ListContainer","div","useListStyles","makeStyles","theme","root","width","maxWidth","backgroundColor","background","paper","position","overflow","maxHeight","margin","dark","borderRadius","GetStartedMessage","Paper","elevation","ListItemSpaceBetweenText","RowComponent","listLength","progress","onClick","ListItem","button","ListItemText","Math","round","toLocaleString","SelectProfileComponent","SelectProfile","history","useContext","entries","map","getProfiles","classes","List","className","setCurrentProfile","push","viewProfileList","aria-label","editProfileRoute","generateNewKey","base","substring","random","toString","createPairs","firstEntry","firstKey","firstItem","secondKey","secondItem","left","right","createPairList","listEntries","createPairListRecursive","remainder","slice","concat","resetPairList","resetList","resetEntries","result","createNameMap","asyncCreateProfile","context","listText","split","row","image","safetyCheck","log","asyncResetListRows","listIds","resetItem","ProfileContainer","ProfileCard","ProfileName","TextField","ListTextArea","EditProfileComponent","EditProfile","titleText","setTitleText","setListText","listLabel","profileNameLabel","label","placeholder","helperText","onChange","e","target","InputLabelProps","shrink","multiline","rows","rowsMax","Tooltip","title","style","visibility","IconButton","size","disabled","goBackOrHome","then","trim","BorderLinearProgress","withStyles","height","colorPrimary","grey","bar","LinearProgress","useStyles","LinearProgressWithLabel","LinearProgressBarComponent","Box","display","alignItems","mr","Typography","BallotCard","Card","imgHeight","imgHeightMobile","BallotCardMedia","CardMedia","BallotCardComponent","img","raised","CardActionArea","component","alt","gutterBottom","PairContainer","BallotBox","OrText","SkippedText","PairVoteComponent","leftBallot","rightBallot","skippedCount","orClickCount","setOrClickCount","castVote","votePair","LinearProgressBar","alert","skipPair","PairVoteContainer","setPairIndex","setPair","reverseOrder","setReverseOrder","voteQueue","queue","nextIndex","floor","nextPair","randomNextPair","warn","replace","selectProfileRoute","ProgressContainer","EnhancedTableHead","headCells","onSelectAllClick","order","orderBy","numSelected","rowCount","onRequestSort","TableHead","TableRow","TableCell","padding","Checkbox","indeterminate","checked","inputProps","headCell","align","numeric","disablePadding","sortDirection","sortable","TableSortLabel","active","direction","property","event","visuallyHidden","useToolbarStyles","paddingLeft","spacing","paddingRight","highlight","lighten","light","flex","flexDirection","input","EnhancedTableToolbar","rankRange","onRankRangeChange","onExportRows","onClearRows","editButtonText","doneButtonText","isSelectMode","isEditMode","setIsEditMode","createChangeHandler","start","end","isNaN","Number","Toolbar","clsx","ImportExport","Delete","defaultValue","Done","Edit","container","minHeight","marginBottom","table","minWidth","border","clip","top","RowImage","ResultTableCellComponent","labelId","rank","outRow","isName","isImg","scope","src","ResultTableRowComponent","isItemSelected","handleClick","hover","role","aria-checked","tabIndex","selected","descendingComparator","b","getComparator","stableSort","array","comparator","stabilizedThis","el","sort","rowsPerPageOptions","ResultTableComponent","defaultOrderBy","defaultOrder","defaultRowCount","maxScore","setOrder","setOrderBy","setSelected","page","setPage","rowsPerPage","setRowsPerPage","rankStart","setRankStart","rankEnd","setRankEnd","selectedIndex","indexOf","newSelected","isSelected","calculateRank","EPSILON","toFixed","delimiter","rowWidth","csvContent","join","hiddenElement","document","createElement","href","encodeURI","download","click","exportCsv","header","column","filteredRows","unshift","filterSelectedRows","TableContainer","Table","stickyHeader","aria-labelledby","newSelecteds","n","TableBody","TablePagination","count","onChangePage","newPage","onChangeRowsPerPage","parseInt","ViewListComponent","listRows","resultsTitleSuffix","resultsTitle","voteOnPairs","ResultTable","homeRoute","routeComponent","path","routeList","PairVote","ViewList","goBack","App","ThemeProvider","basename","process","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AppContext","currentProfileKey","AppProvider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2f65b0da.chunk.js","sourcesContent":["let valueCache = {};\n\n/**\n * Creates hook like functions for manipulating local storage.\n *\n * @param {string} key\n * @param {object} initialValue\n * @return {[value: any, setValue: (value) => {}]}\n */\nexport const useLocalStorage = (key, initialValue) => {\n  const getValue = () => {\n    try {\n      const rawItem = window.localStorage.getItem(key);\n      return rawItem ? JSON.parse(rawItem) : initialValue;\n    } catch (error) {\n      console.error('Failed to retrieve value! Using initial value', error);\n      return initialValue;\n    }\n  };\n\n  if (!valueCache[key]) {\n    valueCache[key] = getValue();\n  }\n\n  const setValue = (value) => {\n    try {\n      const valueString = JSON.stringify(value);\n      window.localStorage.setItem(key, valueString);\n      valueCache[key] = value;\n    } catch (error) {\n      console.error('Failed to store value!', error);\n    }\n  };\n\n  return [valueCache[key], setValue];\n};\n","export const PROFILE_ADD = 'PROFILE/ADD';\nexport const PROFILE_SET_CURRENT = 'PROFILE/SET_CURRENT';\nexport const PROFILE_RESTORE_STATE = 'PROFILE/RESTORE_STATE';\nexport const PAIR_VOTE = 'PROFILE/PAIR/WINNER'\nexport const PAIR_SKIP = 'PROFILE/PAIR/SKIP'\nexport const LIST_EDIT = 'PROFILE/LIST/EDIT';\nexport const LIST_RESET_ROWS = 'PROFILE/LIST/RESET_ROWS';\n\n/**\n * @typedef {import('./ProfileStructure').ComparisonRow} ComparisonRow\n * @typedef {import('./ProfileStructure').ComparisonCandidate} ComparisonCandidate\n * @typedef {import('./ProfileStructure').ProfileItem} ProfileItem\n * @typedef {import('./ProfileStructure').VotingPair} VotingPair\n * @typedef {import('./reducers').ProfileState} ProfileState\n * @typedef {import('./reducers').Action} Action\n */\n\n/////////////////////////////////////////////////////////////////////////\n// Actions\n/////////////////////////////////////////////////////////////////////////\n\n/**\n *\n * @param {ProfileState} profileState\n * @return {Action}\n */\nexport const restoreProfileState = (profileState) => ({\n  type: PROFILE_RESTORE_STATE,\n  data: {\n    profileState\n  }\n});\n\n/**\n *\n * @param {string} newProfileId\n * @param {string} name\n * @param {Object.<string, ComparisonCandidate>} nameMap\n * @param {Object.<string, VotingPair>} pairList\n * @return {Action}\n */\nexport const addProfile = (newProfileId, name, nameMap, pairList) => ({\n  type: PROFILE_ADD,\n  data: {\n    newProfileId, name, nameMap, pairList\n  }\n});\n\n/**\n *\n * @param {string} id\n * @return {Action}\n */\nexport const setCurrentProfile = (id) => ({\n  type: PROFILE_SET_CURRENT,\n  data: {\n    id\n  }\n});\n\n/**\n *\n * @param {string} pairIndex\n * @param {string} winnerListId\n * @return {Action}\n */\nexport const votePair = (pairIndex, winnerListId) => ({\n  type: PAIR_VOTE,\n  data: {\n    pairIndex,\n    winnerListId\n  }\n});\n\n/**\n *\n * @param {string} pairIndex\n * @return {Action}\n */\nexport const skipPair = (pairIndex) => ({\n  type: PAIR_SKIP,\n  data: {\n    pairIndex\n  }\n});\n\n/**\n *\n * @param {[string]} listIds\n * @param {Object.<string, ComparisonCandidate>} nameMap\n * @param {[VotingPair]} pairList\n * @return {Action}\n */\nexport const resetListRows = (nameMap, pairList) => ({\n  type: LIST_RESET_ROWS,\n  data: {\n    nameMap, pairList\n  }\n});\n","import {\n  LIST_RESET_ROWS,\n  PAIR_SKIP,\n  PAIR_VOTE,\n  PROFILE_ADD,\n  PROFILE_RESTORE_STATE,\n  PROFILE_SET_CURRENT,\n} from './actions';\n\n/**\n * @typedef {import('./ProfileStructure').ComparisonRow} ComparisonRow\n * @typedef {import('./ProfileStructure').ComparisonCandidate} ComparisonCandidate\n * @typedef {import('./ProfileStructure').ProfileItem} ProfileItem\n * @typedef {import('./ProfileStructure').VotingPair} VotingPair\n */\n\n/**\n * React reducer action.\n * @typedef {{\n *  type: string, data: any\n * }} Action\n */\n\n/**\n *\n * @typedef {{\n * currentProfile: string | null,\n * updatedAtTime: number | null,\n * profiles: Object.<string, ProfileItem>\n * }} ProfileState\n */\n\n/**\n *\n * @param {ProfileState} state\n * @param {Action} action\n * @return {ProfileState}\n */\nexport function reducer(state, action) {\n  switch (action.type) {\n    case PROFILE_RESTORE_STATE:\n      return {\n        ...state,\n        ...action.data.profileState\n      };\n    default:\n      return {\n        ...rootReducer(state, action),\n        updatedAtTime: new Date().getTime()\n      };\n  }\n}\n/**\n *\n * @param {ProfileState} state\n * @param {Action} action\n * @return {ProfileState}\n */\nfunction rootReducer(state, action) {\n  const { type, data } = action;\n  switch (type) {\n    case PROFILE_SET_CURRENT:\n      const currentProfileId = data.id;\n      if (!state.profiles[currentProfileId]) {\n        throw new Error(`Invalid profile supplied: '${currentProfileId}'`);\n      }\n      return {\n        ...state,\n        currentProfile: currentProfileId\n      };\n    case PROFILE_ADD:\n      return {\n        ...state,\n        currentProfile: data.newProfileId,\n        profiles: profileReducer(state.profiles, action, data.newProfileId)\n      };\n    case LIST_RESET_ROWS:\n    case PAIR_SKIP:\n    case PAIR_VOTE:\n      if (!state.profiles[state.currentProfile]) {\n        throw new Error(`No profile selected!`);\n      }\n      return {\n        ...state,\n        profiles: profileReducer(state.profiles, action, state.currentProfile)\n      };\n    default:\n      return state;\n  }\n}\n\n/**\n *\n * @param {Object.<string, ProfileItem>} state\n * @param {Action} action\n * @param {string} currentProfile\n */\nfunction profileReducer(state, action, currentProfile) {\n  const { type, data } = action;\n  switch (type) {\n    case PROFILE_ADD:\n      const newProfile = {};\n      newProfile[currentProfile] = {\n        name: data.name,\n        list: data.nameMap,\n        dateTime: new Date().getTime(),\n        pairs: data.pairList,\n        totalComparisons: data.pairList.length\n      };\n\n      return {\n        ...state,\n        ...newProfile\n      };\n    case PAIR_SKIP:\n      const skipProfile = {};\n      skipProfile[currentProfile] = {\n        ...state[currentProfile],\n        dateTime: new Date().getTime(),\n        pairs: pairReducer(state[currentProfile].pairs, action, data.pairIndex)\n      };\n      return {\n        ...state,\n        ...skipProfile\n      };\n    case PAIR_VOTE:\n      const voteProfile = {};\n      voteProfile[currentProfile] = {\n        ...state[currentProfile],\n        dateTime: new Date().getTime(),\n        list: listReducer(state[currentProfile].list, action, data.winnerListId),\n        pairs: pairReducer(state[currentProfile].pairs, action, data.pairIndex)\n      };\n      return {\n        ...state,\n        ...voteProfile\n      };\n    case LIST_RESET_ROWS:\n      const resetRowsProfile = {};\n      resetRowsProfile[currentProfile] = {\n        ...state[currentProfile],\n        dateTime: new Date().getTime(),\n        list: listReducer(state[currentProfile].list, action),\n        pairs: pairReducer(state[currentProfile].pairs, action)\n      };\n      return {\n        ...state,\n        ...resetRowsProfile\n      };\n    default:\n      return state;\n  }\n}\n\n/**\n *\n * @param {Object.<string, ComparisonCandidate>} state\n * @param {Action} action\n * @param {string|null} listId\n */\nfunction listReducer(state, action, listId = null) {\n  const { type, data } = action;\n  switch (type) {\n    case LIST_RESET_ROWS:\n      return {\n        ...state,\n        ...data.nameMap\n      }\n    case PAIR_VOTE:\n      const voteListRow = {}\n      voteListRow[listId] = {\n        ...state[listId],\n      };\n      voteListRow[listId].score++;\n      return {\n        ...state,\n        ...voteListRow\n      };\n    default:\n      return state;\n  }\n}\n\n/**\n *\n * @param {[VotingPair]} state\n * @param {Action} action\n * @param {string|null} pairIndex\n */\nfunction pairReducer(state, action, pairIndex = null) {\n  const { type, data } = action;\n  switch (type) {\n    case LIST_RESET_ROWS:\n      const resetPairs = [\n        // Merge new data first as we'll be filtering array, first entry wins.\n        ...data.pairList,\n        ...state,\n      ];\n      return resetPairs.filter((pair, index) => (\n        resetPairs.findIndex(\n          pairCheck => pairCheck.id === pair.id || pairCheck.rid === pair.id\n        ) === index\n      ));\n    case PAIR_VOTE:\n      const pairNext = [\n        ...state,\n      ];\n      pairNext.splice(pairIndex, 1);\n      return pairNext;\n    case PAIR_SKIP:\n      const pairSkip = [\n        ...state,\n      ];\n      pairSkip[pairIndex].skipped++;\n      return pairSkip;\n    default:\n      return state;\n  }\n}\n","import React from 'react';\nimport { createSelector } from 'reselect'\nimport { useLocalStorage } from 'lib/localStorage';\nimport { restoreProfileState } from './actions';\nimport { reducer } from './reducers';\n\n/**\n * @typedef {import('./ProfileStructure').ComparisonRow} ComparisonRow\n * @typedef {import('./ProfileStructure').ComparisonCandidate} ComparisonCandidate\n * @typedef {import('./ProfileStructure').ProfileItem} ProfileItem\n * @typedef {import('./ProfileStructure').VotingPair} VotingPair\n * @typedef {import('./reducers').ProfileState} ProfileState\n * @typedef {import('./reducers').Action} Action\n */\n\n/////////////////////////////////////////////////////////////////////////\n// Selectors\n/////////////////////////////////////////////////////////////////////////\n\n/**\n * @param {ProfileState} state\n * @returns {[ProfileItem]}\n */\nexport const getProfiles = state => Object.entries(state.profiles)\n  .map(([id, profile]) => ({ ...profile, id }));\n\n/**\n * @param {ProfileState} state\n * @returns {ProfileItem|null} Null if no profile selected.\n */\nexport const getCurrentProfile = state => state.currentProfile ? ({\n  ...state.profiles[state.currentProfile],\n  id: state.currentProfile\n}) : null;\n\n/**\n * @param {ProfileState} state\n * @return {[VotingPair]} Array of VotingPairs.\n */\nexport const getPairs = createSelector(\n  getCurrentProfile,\n  profile => profile ? profile.pairs : []\n);\n\n/**\n * @param {ProfileState} state\n * @return {[ComparisonCandidate]}\n */\nexport const getListValues = createSelector(\n  getCurrentProfile,\n  profile => profile ? Object.values(profile.list) : []\n);\n\n/**\n * @param {ProfileState} state\n * @return {number} The max score for the current list.\n */\nexport const getMaxScore = createSelector(\n  getListValues,\n  listValues => listValues.reduce(\n    (max, item) => max < item.score ? item.score : max,\n    0\n  )\n);\n\n/**\n * @param {ProfileState} state\n * @return {number} The length of comparisons or 1 (to prevent NaN/Infinity).\n */\nexport const getTotalComparisons = createSelector(\n  getCurrentProfile,\n  (profile) => (profile && profile.totalComparisons) || 1\n);\n\n/**\n * @param {ProfileState} state\n * @return {number}\n */\nexport const getProgress = createSelector(\n  getPairs,\n  getTotalComparisons,\n  (pairs, total) => pairs ? total - pairs.length : 0\n);\n\n/**\n *\n * @param {ProfileState} state\n * @return {number}\n */\nexport const getUpdatedAtTime = (state) => state.updatedAtTime;\n\n/**\n* The profile state with keys for each id.\n*\n* @typedef ProfileState\n*/\nconst initialState = {\n  currentProfile: null,\n  updatedAtTime: null,\n  profiles: {}\n};\n\nexport const ProfileContext = React.createContext();\n\n/**\n * Be careful changing this; can use the version number\n * to nail down the storage schema/migrations if necessary.\n * We nest local storage since we expect multiple localhost AND\n * multiple` iamovrhere.github.io` applications.\n */\nconst localStorageKey = 'pairwise-ranking-app:profiles:v0.1.0';\n\nconst THRESHOLD_MS = 5000;\nconst checkIfStorageStale = (storedUpdatedAt, currentUpdatedAt) =>\n  Date.now() - storedUpdatedAt > THRESHOLD_MS && currentUpdatedAt > storedUpdatedAt;\n\n/**\n * @returns {{ state: ProfileState, dispatch: (Action) => {}}}\n */\nexport function ProfileProvider(props) {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const [storageState, setStorageState] = useLocalStorage(localStorageKey, initialState);\n\n  const [refreshTime, setRefreshTime] = React.useState(0);\n\n  const currentProfile = getCurrentProfile(state);\n  const storedProfile = getCurrentProfile(storageState);\n  const shouldRestoreState = !currentProfile && storedProfile;\n\n  const storedUpdatedAt = getUpdatedAtTime(storageState);\n  const currentUpdatedAt = getUpdatedAtTime(state);\n  const isStorageStale = checkIfStorageStale(storedUpdatedAt, currentUpdatedAt);\n  const shouldSaveState = currentProfile && isStorageStale;\n\n  React.useEffect(() => {\n    if (shouldRestoreState) {\n      dispatch(restoreProfileState(storageState));\n      setInterval(() => setRefreshTime(new Date().getTime()), THRESHOLD_MS);\n    }\n  }, [dispatch, setRefreshTime, shouldRestoreState, storageState]);\n\n  React.useEffect(() => {\n    if (shouldSaveState) {\n      const asyncSetStorage = async () => {\n        setStorageState(state);\n      };\n      asyncSetStorage();\n    }\n  }, [state, refreshTime, shouldSaveState, setStorageState]);\n\n  const value = { state, dispatch };\n\n  return (\n    <ProfileContext.Provider value={value}>\n      {props.children}\n    </ProfileContext.Provider>\n  );\n}\n","import {\n  Button,\n  Fab,\n  colors\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// https://material-ui.com/customization/default-theme/\n// Nice tool for palette mixing:\n// https://material-ui.com/customization/color/\nexport const AppTheme = createMuiTheme({\n  palette: {\n    primary: {\n      // Slightly darker than `colors.lightGreen`\n      // Better contrast and more on theme.\n      main: '#689f38',\n    },\n    secondary: colors.orange\n  },\n});\n\n// https://material-ui.com/customization/breakpoints/\n// 0px     600px    960px    1280px   1920px\nconst md = 960;\n/**\n * Usage:\n * ${breakPoint.mediumAndSmaller} {\n *    ... // styling\n *  }\n */\nexport const breakPoint = {\n  mediumAndSmaller: `@media (max-width: ${md}px)`\n};\n\nexport const CommonButton = styled(Button)`\n  &.MuiButton-root {\n    width: 10rem;\n    margin: .5rem;\n  }\n`;\n\nexport const PrimaryButton = styled(CommonButton).attrs({\n  variant: \"contained\",\n  color: \"primary\"\n})``;\n\nexport const OptionalButton = styled(CommonButton).attrs({\n  variant: \"contained\",\n})``;\n\n\nexport const CancelButton = styled(CommonButton).attrs({\n  variant: \"outlined\",\n  color: \"secondary\"\n})``;\n\nexport const PrimaryFab = styled(Fab).attrs({\n  color: \"primary\"\n})`\n  &.MuiFab-root {\n    margin: .5rem;\n  }\n`;\n","import styled from 'styled-components';\nimport {\n  Paper,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { breakPoint } from 'components/common/common.style';\n\nconst blockMargin = '1rem';\nexport const ListContainer = styled.div`\n  display: flex;\n  align-content: space-between;\n  flex-direction: column;\n  align-items: center;\n\n  margin: 2rem auto;\n\n  width: 80%;\n  max-width: 100%;\n\n  ${breakPoint.mediumAndSmaller} {\n    width: 100%;\n  }\n`;\n\nexport const useListStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 400,\n    backgroundColor: theme.palette.background.paper,\n    position: 'relative',\n    overflow: 'auto',\n    maxHeight: '60vh',\n    margin: blockMargin,\n    color: theme.palette.primary.dark,\n    borderRadius: '1rem'\n  },\n}));\n\n\nexport const GetStartedMessage = styled(Paper).attrs({\n  elevation: 10\n})`\n  display: flex;\n  align-items: center;\n  min-height: 20vh;\n\n  margin: ${blockMargin};\n  padding: 2rem;\n  border-radius: 1rem;\n`;\n\nexport const ListItemSpaceBetweenText = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  ProfileContext,\n  getProfiles,\n} from 'contexts/Profile';\nimport { setCurrentProfile } from 'contexts/Profile/actions';\nimport {\n  GetStartedMessage,\n  ListContainer,\n  ListItemSpaceBetweenText,\n  useListStyles,\n} from './SelectProfile.style';\nimport {\n  editProfileRoute,\n  viewProfileList\n} from 'app/routes';\nimport {\n  List,\n  ListItem,\n  ListItemText,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport {\n  PrimaryFab\n} from 'components/common/common.style';\n\nfunction RowComponent(props) {\n  const { id, name, dateTime, listLength, progress, totalComparisons, onClick } = props;\n\n  return (\n    <ListItem button key={id} onClick={onClick}>\n      <ListItemText\n        primary={<ListItemSpaceBetweenText>\n          <span>{name}</span>\n          <span>{\n            `    ${Math.round(progress / totalComparisons * 100)}%`\n          }</span>\n        </ListItemSpaceBetweenText>}\n        secondary={\n          <ListItemSpaceBetweenText>\n            <span>{\n              `${listLength} rows ` +\n              `(${progress}/${totalComparisons})`\n            }</span>\n            <span>{new Date(dateTime).toLocaleString()}</span>\n          </ListItemSpaceBetweenText>\n        }\n\n      >\n      </ListItemText>\n    </ListItem>\n  );\n}\n\nRowComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  dateTime: PropTypes.number.isRequired,\n  listLength: PropTypes.number.isRequired,\n  progress: PropTypes.number.isRequired,\n  totalComparisons: PropTypes.number.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nfunction SelectProfileComponent({ history }) {\n  const { state, dispatch } = React.useContext(ProfileContext);\n  const profiles = getProfiles(state);\n  const classes = useListStyles();\n\n  const emptyList = `Create a profile to get started`;\n  return (\n    <>\n      <ListContainer>\n        {\n          profiles.length ?\n            (\n              <List className={classes.root}>\n                {\n                  profiles.map(({ name, id, dateTime, list, pairs, totalComparisons }) => {\n                    const listLength = Object.values(list).length;\n                    const progress = totalComparisons - pairs.length;\n                    return (\n                      <RowComponent\n                        key={id}\n                        id={id}\n                        name={name}\n                        dateTime={dateTime}\n                        progress={progress}\n                        listLength={listLength}\n                        totalComparisons={totalComparisons}\n                        onClick={() => {\n                          dispatch(setCurrentProfile(id));\n                          history.push(viewProfileList);\n                        }}\n                      />\n                    );\n                  })\n                }\n              </List>\n            ) :\n            <GetStartedMessage>\n              {emptyList}\n            </GetStartedMessage>\n        }\n        <PrimaryFab\n          aria-label=\"add\"\n          onClick={() => history.push(editProfileRoute)}\n        >\n          <AddIcon />\n        </PrimaryFab>\n      </ListContainer>\n\n    </>\n  );\n}\n\nexport default SelectProfileComponent;\n","import SelectProfile from './SelectProfileComponent';\n\nexport default SelectProfile;\n","/**\n * Collection of simple lib/util functions.\n * Be wary of making this a dumping ground.\n */\n\n\n/**\n * @param {string} base\n * @return {string} Random key of the form: `${10CharBase}_${getTime()}_${random32Num}`\n */\nexport const generateNewKey = (base) =>\n  `${base.substring(0, 10)}_` +\n  `${new Date().getTime()}_` +\n  `${Math.random().toString(36).substring(2, 4)}`;\n\n/**\n * @return {boolean}\n */\nexport const flipCoin = () => Math.floor(Math.random() * 2) % 2 === 0;\n","\n/**\n * The individual units that are being compared.\n * @typedef {{\n  * name: string,\n  * image: string\n  * }} ComparisonRow\n  */\n\n/**\n* The individual units that are being compared, with meta-data.\n*\n* @typedef {{\n* id: string,\n* name: string,\n* image: string,\n* score: number\n* }} ComparisonCandidate\n*/\n\n/**\n * A voting pair to compare against each other.\n *\n * @typedef {{\n *  id: string,\n *  rid: string,\n *  left: ComparisonCandidate,\n *  right: ComparisonCandidate,\n *  skipped: number,\n * }} VotingPair\n */\n\n/**\n* Profile items as they appear in the profiles map.\n* Where the `pairs` are \"to be voted\". Performance works best\n* as an array for the pairs.\n*\n* @typedef {{\n *   id: string,\n *   name: string,\n *   list: Object.<string, ComparisonCandidate>,\n *   dateTime: number,\n *   pairs: [VotingPair],\n *   totalComparisons: number\n * }} ProfileItem\n */\n\n/**\n * This gives every combination between `firstEntry` and `list`.\n * It does not account for duplicates, so list may need to be filtered.\n *\n * @param {[string, ComparisonCandidate]} firstEntry\n * @param {Object.<string, ComparisonCandidate>} list\n * @return {[VotingPair]}\n */\nconst createPairs = (firstEntry, list) => {\n  const [firstKey, firstItem] = firstEntry;\n  return list.map(([secondKey, secondItem]) => ({\n    id: `${firstKey}${secondKey}`,\n    rid: `${secondKey}${firstKey}`,\n    left: firstItem,\n    right: secondItem,\n    skipped: 0\n  }));\n};\n\n/**\n * This gives every combination between all items in `list`\n * but not against themselves & disregarding order.\n * The result is  n!/r!(n-r)!.\n *\n * @param {Object.<string, ComparisonCandidate>} list\n * @return {[VotingPair]}\n */\nexport const createPairList = (list) => {\n  const listEntries = Object.entries(list);\n  return createPairListRecursive(listEntries);\n}\n\n/**\n * This gives every combination between all items in `list`\n * but not against themselves & disregarding order.\n * The result is  n!/r!(n-r)!.\n *\n * @param {[ComparisonCandidate]} listEntries\n * @return {[VotingPair]}\n */\nconst createPairListRecursive = (listEntries) => {\n  if (listEntries.length < 2) {\n    return [];\n  }\n  // By reducing the remainder by one, we ensure no\n  // mirror duplicates.\n  const firstItem = listEntries[0];\n  const remainder = listEntries.slice(1);\n\n  const pairs = createPairs(firstItem, remainder);\n  return pairs.concat(createPairListRecursive(remainder));\n};\n\n/**\n * This gives every combination between all items in `list`\n * but not against themselves & disregarding order.\n * The result is  n!/r!(n-r)!.\n *\n * @param {Object.<string, ComparisonCandidate>} resetList\n * @param {Object.<string, ComparisonCandidate>} list\n * @return {[VotingPair]}\n */\nexport const resetPairList = (resetList, list) => {\n  const key = 0;\n  const resetEntries = Object.entries(resetList);\n  let listEntries = Object.entries(list);\n\n  return resetEntries.reduce((result, firstItem) => {\n    // We remove each matching record first, to prevent a double list.\n    listEntries = listEntries.filter((item) => firstItem[key] !== item[key]);\n    return result.concat(createPairs(firstItem, listEntries));\n  }, []);\n}\n\n/**\n * Removes all duplicates based on the name. Adds score + id.\n *\n * @param {[ComparisonRow]} list\n * @return {Object.<string, ComparisonCandidate>}\n */\nexport const createNameMap = list => list.reduce((nameMap, item) => {\n  const id = '_' + item.name;\n  nameMap[id] = {\n    ...item,\n    id,\n    score: 0,\n  };\n  return nameMap;\n}, {});\n","import { getCurrentProfile } from 'contexts/Profile';\nimport { addProfile, resetListRows } from 'contexts/Profile/actions';\nimport { generateNewKey } from 'lib';\nimport { createNameMap, createPairList, resetPairList } from './ProfileStructure';\n\n/**\n * @typedef {import('./ProfileStructure').ComparisonRow} ComparisonRow\n * @typedef {import('./ProfileStructure').ComparisonCandidate} ComparisonCandidate\n * @typedef {import('./ProfileStructure').ProfileItem} ProfileItem\n * @typedef {import('./ProfileStructure').VotingPair} VotingPair\n */\n\n// 4 spaces, because tabs are difficult in browsers.\n// TODO change to multiple space + http://\nconst SEPARATOR = '    ';\n\n/**\n * Does the process of creating the new profile + pair list.\n * Then dispatches.\n *\n * @param {{ state: any, dispatch: Function}} dispatch\n * @param {string} name\n * @param {string} listText text with a separator (current 4 tabs)\n */\nexport const asyncCreateProfile = async (context, name, listText) => {\n  const { state, dispatch } = context;\n  const list = listText.split('\\n').map((row) => {\n    const [name, image] = row.split(SEPARATOR);\n    return { name, image };\n  }).filter(({ name, image }) => name || image);\n\n  let newProfileId = generateNewKey(name);\n  let safetyCheck = 100;\n\n  // Guarantee uniqueness.\n  while (state.profiles[newProfileId]) {\n    if (safetyCheck--) {\n      newProfileId = generateNewKey(name);\n    } else {\n      console.error('Failed uniqueness 100 times! Play the lottery?')\n      break;\n    }\n  }\n\n  const nameMap = createNameMap(list);\n  const pairList = createPairList(nameMap);\n  console.log(nameMap, pairList);\n  dispatch(addProfile(newProfileId, name, nameMap, pairList));\n};\n\n/**\n * Does the process of creating the new profile + pair list.\n * Then dispatches.\n *\n * @param {{ state: any, dispatch: Function}} dispatch\n * @param {[string]} listIds\n */\nexport const asyncResetListRows = async (context, listIds) => {\n  const { state, dispatch } = context;\n  const profile = getCurrentProfile(state);\n  const nameMap = listIds.reduce((map, id) => {\n    const resetItem = { ...profile.list[id] };\n    resetItem.score = 0;\n    map[id] = resetItem;\n    return map;\n  }, {});\n  const pairList = resetPairList(nameMap, profile.list);\n  console.log(nameMap, pairList);\n  dispatch(resetListRows(nameMap, pairList));\n};\n","import {\n  Paper,\n  TextField\n} from '@material-ui/core';\nimport styled from 'styled-components';\n\n// TODO RESPONSIVE\nexport const ProfileContainer = styled.div`\n  margin: auto;\n`;\n\nexport const ProfileCard = styled(Paper).attrs({\n  elevation: 10\n})`\n  padding: 1rem;\n  border-radius: 1rem;\n`;\n\nexport const ProfileName = styled(TextField)`\n  &.MuiFormControl-root {\n    width: 95%;\n    margin: 1rem;\n  }\n`;\n\nexport const ListTextArea = styled(TextField)`\n  &.MuiFormControl-root {\n    width: 95%;\n    margin: 1rem;\n  }\n`;\n","import React from 'react';\nimport {\n  IconButton,\n  Tooltip,\n} from '@material-ui/core';\nimport {\n  EmojiObjectsOutlined as LightBulbOutlinedIcon,\n} from '@material-ui/icons';\nimport { ProfileContext } from 'contexts/Profile';\nimport { asyncCreateProfile } from 'contexts/Profile/middleware';\nimport { viewProfileList, goBackOrHome } from 'app/routes';\nimport {\n  PrimaryButton,\n  CancelButton\n} from 'components/common/common.style';\nimport {\n  ListTextArea,\n  ProfileContainer,\n  ProfileCard,\n  ProfileName,\n} from './EditProfile.style';\n\nconst SAMPLE_TITLE = 'Apples & Oranges';\nconst SAMPLE_DATA = `Honey Crisp    https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Honeycrisp.jpg/600px-Honeycrisp.jpg\nTangerine     https://upload.wikimedia.org/wikipedia/commons/2/2a/TangerineFruit.jpg\nMandarin Orange    https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/Mandarin_Oranges_%28Citrus_Reticulata%29.jpg/800px-Mandarin_Oranges_%28Citrus_Reticulata%29.jpg\nBlood Orange     https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/BloodOrange.jpg/800px-BloodOrange.jpg\nAmbrosia     https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Ambrosia_apples_2017_A3.jpg/600px-Ambrosia_apples_2017_A3.jpg\nGolden Delicious    https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Golden_delicious_apple.jpg/800px-Golden_delicious_apple.jpg\n\n`;\n\nfunction EditProfileComponent({ history }) {\n  const context = React.useContext(ProfileContext);\n  const [titleText, setTitleText] = React.useState('');\n  const [listText, setListText] = React.useState('');\n\n  // TODO TRANSLATIONS\n  const listLabel = 'List of comparable items';\n  const listPlaceholder = '\"Item 1\"    [Optional: <4-spaces> Image-URL]\\n' +\n    '\"Item 2\"    [Optional: <4-spaces> Image-URL]\\n' +\n    '\"Item 3\"    [Optional: <4-spaces> Image-URL]\\n' +\n    '\\n\\n' +\n    'Recommended for lists under 500 (124,750 comparisons)\\n' +\n    '...';\n  const listMin = 10;\n  const listMax = 20;\n\n  const profileNameLabel = \"List Name\";\n  const profileNamePlaceholder = \"What's the name of this Profile?\";\n\n\n  return (\n    <ProfileContainer>\n      <ProfileCard>\n        <ProfileName\n          aria-label={profileNameLabel}\n          label={profileNameLabel}\n          placeholder={profileNamePlaceholder}\n          helperText=\"\"\n          variant=\"outlined\"\n          onChange={(e) => {\n            setTitleText(e.target.value);\n          }}\n          value={titleText}\n          InputLabelProps={{ shrink: !!titleText }}\n        />\n        <ListTextArea\n          aria-label={listLabel}\n          label={listLabel}\n          multiline\n          rows={listMin}\n          rowsMax={listMax}\n          variant=\"outlined\"\n          placeholder={listPlaceholder}\n          onChange={(e) => {\n            setListText(e.target.value);\n          }}\n          value={listText}\n          InputLabelProps={{ shrink: !!listText }}\n        />\n        {\n          <Tooltip\n            title=\"Use Sample Content\"\n            style={{ visibility: listText ? 'hidden' : 'visible' }}\n          >\n            <IconButton\n              size=\"small\"\n              aria-label=\"Use Sample Content\"\n              onClick={() => {\n                setTitleText(SAMPLE_TITLE);\n                setListText(SAMPLE_DATA);\n              }}\n              disabled={!!listText}\n            >\n              <LightBulbOutlinedIcon />\n              Sample\n            </IconButton>\n          </Tooltip>\n        }\n      </ProfileCard>\n      <CancelButton\n        onClick={() => goBackOrHome(history)}\n      >\n        Back\n      </CancelButton>\n      <PrimaryButton\n        onClick={() => {\n          // TODO add spinner.\n          asyncCreateProfile(context, titleText, listText)\n            .then(() => history.push(viewProfileList));\n        }}\n        disabled={!listText.trim() || !titleText.trim()}\n      >\n        Save\n      </PrimaryButton>\n    </ProfileContainer>\n  );\n}\n\nexport default EditProfileComponent;\n","import EditProfile from './EditProfileComponent';\n\nexport default EditProfile;\n","/**\n * From: https://material-ui.com/components/progress/\n *\n * And modified.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nconst BorderLinearProgress = withStyles((theme) => ({\n  root: {\n    height: 15,\n    borderRadius: 10,\n  },\n  colorPrimary: {\n    backgroundColor: theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\n  },\n  bar: {\n    borderRadius: 10,\n  },\n}))(LinearProgress);\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n});\n\n/**\n * Displays a chunky linear progress bar with `value/total (progress %)`.\n * @param {{\n  value: number,\n  total: number,\n  * }} props\n */\nfunction LinearProgressWithLabel(props) {\n  const classes = useStyles();\n  const { value, total } = props;\n  const progress = value / total * 100;\n  return (\n    <Box display=\"flex\" alignItems=\"center\" className={classes.root}>\n      <Box width=\"100%\" mr={1}>\n        <BorderLinearProgress\n          variant=\"determinate\"\n          {...props}\n          value={progress}\n          height={40}\n        />\n      </Box>\n      <Box>\n        <Typography variant=\"body2\">\n          {`${value}/${total}`}&nbsp;\n          {`(${Math.round(progress)}%)`}\n        </Typography>\n      </Box>\n    </Box>\n  );\n}\n\nLinearProgressWithLabel.propTypes = {\n  value: PropTypes.number.isRequired,\n  total: PropTypes.number.isRequired,\n};\n\nexport default LinearProgressWithLabel;\n\n","import LinearProgressBarComponent from './LinearProgressBarComponent';\n\nexport default LinearProgressBarComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Card,\n  CardActionArea,\n  CardMedia,\n  Typography,\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport { breakPoint } from 'components/common/common.style'\n\nconst imgHeight = 250;\nconst imgHeightMobile = 175;\nconst minHeight = imgHeight + 80;\nconst maxWidth = imgHeight + 150;\nconst minHeightMobile = imgHeightMobile + 40;\nconst BallotCard = styled(Card)`\n  display: flex;\n  min-height: ${minHeight}px;\n  width: ${maxWidth}px;\n  border-radius: .5rem;\n\n  h2 {\n    padding: 0 1rem;\n    overflow: ellipsis;\n  }\n\n  ${breakPoint.mediumAndSmaller} {\n    min-height: ${minHeightMobile}px;\n    min-width: ${minHeightMobile}px;\n    width: 90%;\n  }\n`;\n\nconst BallotCardMedia = styled(CardMedia)`\n  object-fit: scale-down;\n  max-height: ${imgHeight}px;\n\n  ${breakPoint.mediumAndSmaller} {\n    height: ${imgHeightMobile}px;\n  }\n`;\n\n/**\n * Creates a single ballot image card.\n * If there's no image, it'll just render the text is squarish card.\n *\n * @param {{\n  img: null|string,\n  title: string,\n  onClick: Function\n  * }} param0\n */\nfunction BallotCardComponent({ img, title, onClick }) {\n  return (\n    <BallotCard raised={true}>\n      <CardActionArea onClick={onClick}>\n        {\n          img &&\n          <BallotCardMedia\n            component=\"img\"\n            alt={title}\n            image={img}\n            title={title}\n          />\n        }\n        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n          {title}\n        </Typography>\n      </CardActionArea>\n    </BallotCard>\n  );\n}\n\nBallotCardComponent.propTypes = {\n  img: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired\n};\n\nexport default BallotCardComponent;\n","import BallotCardComponent from './BallotCardComponent';\n\nexport default BallotCardComponent;\n","import styled from 'styled-components';\nimport { breakPoint } from 'components/common/common.style';\n\n// TODO RESPONSIVE\nexport const PairContainer = styled.div`\n  display: flex;\n  align-content: space-between;\n  flex-direction: column;\n  align-items: center;\n  margin: 1rem 0;\n`;\n\nexport const BallotBox = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  margin-top: 2rem;\n\n  > * {\n    max-width: 45%;\n    flex-grow: 1;\n  }\n\n  ${breakPoint.mediumAndSmaller} {\n    flex-direction: column;\n    > * {\n      max-width: unset;\n      width: 100%;\n    }\n  }\n`;\n\nexport const OrText = styled.div`\n  margin: 1rem;\n  flex-grow: unset;\n`;\n\nexport const SkippedText = styled.div`\n  margin-top: 1rem;\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.7);\n`;\n","import React from 'react';\nimport { goBackOrHome } from 'app/routes';\nimport { ProfileContext } from 'contexts/Profile';\nimport { votePair, skipPair } from 'contexts/Profile/actions';\nimport {\n  OptionalButton,\n  CancelButton\n} from 'components/common/common.style';\nimport LinearProgressBar from 'components/common/LinearProgressBar';\nimport BallotCard from './BallotCard';\nimport {\n  BallotBox,\n  PairContainer,\n  OrText,\n  SkippedText,\n} from './PairVote.style';\n\n/**\n * Silly easter egg.\n */\nconst orClickThreshold = 20;\n\n/**\n *\n * @param {number} skipped\n * @return {string}\n */\nconst skippedPhrase = (skipped) => (skipped === 1) ?\n  `1 time` : `${skipped} times`;\n\nfunction PairVoteComponent({\n  history,\n  pairIndex,\n  leftBallot,\n  rightBallot,\n  skippedCount,\n  progress,\n  totalComparisons\n}) {\n  const { dispatch } = React.useContext(ProfileContext);\n\n  const [orClickCount, setOrClickCount] = React.useState(0);\n\n  const castVote = (pairIndex, id) => {\n    dispatch(votePair(pairIndex, id));\n    setOrClickCount(0);\n    console.log(`Voted for: ${id}`);\n  };\n\n  return (\n    leftBallot && rightBallot ?\n      <PairContainer>\n        <LinearProgressBar value={progress} total={totalComparisons} />\n        <BallotBox>\n          <BallotCard\n            img={leftBallot.image}\n            title={leftBallot.name}\n            onClick={() => castVote(pairIndex, leftBallot.id)}\n          />\n          <OrText onClick={() => {\n            setOrClickCount(orClickCount + 1);\n            if (orClickCount && orClickCount % orClickThreshold === 0) {\n              alert(`You chose \"OR\", very funny!`);\n            }\n          }}>\n            OR\n        </OrText>\n          <BallotCard\n            img={rightBallot.image}\n            title={rightBallot.name}\n            onClick={() => castVote(pairIndex, rightBallot.id)}\n          />\n        </BallotBox>\n        <SkippedText>Skipped: {skippedPhrase(skippedCount)}</SkippedText>\n        <OptionalButton\n          onClick={() => {\n            dispatch(skipPair(pairIndex));\n            console.log(`Skipped: ${rightBallot.id} vs. ${leftBallot.id}`);\n          }}\n        >\n          Skip\n      </OptionalButton>\n        <CancelButton\n          onClick={() => goBackOrHome(history)}\n        >\n          Back\n      </CancelButton>\n      </PairContainer> :\n      null\n  );\n}\n\nexport default PairVoteComponent;\n","import React from 'react';\nimport { selectProfileRoute, goBackOrHome } from 'app/routes';\nimport { flipCoin } from 'lib';\nimport {\n  ProfileContext,\n  getCurrentProfile,\n  getPairs,\n  getProgress,\n  getTotalComparisons,\n} from 'contexts/Profile';\nimport PairVoteComponent from './PairVoteComponent';\n\nconst randomNextPair = (queue) => {\n  const nextIndex = Math.floor(Math.random() * queue.length);\n  const nextPair = queue.length ? queue[nextIndex] : [];\n  return {\n    nextIndex,\n    nextPair\n  }\n};\n\nfunction PairVoteContainer(props) {\n  const { history } = props;\n  const { state } = React.useContext(ProfileContext);\n\n  const [pairIndex, setPairIndex] = React.useState(null);\n  const [pair, setPair] = React.useState(null);\n  const [reverseOrder, setReverseOrder] = React.useState(false);\n\n  const voteQueue = getPairs(state);\n  const progress = getProgress(state);\n  const totalComparisons = getTotalComparisons(state);\n\n  React.useEffect(() => {\n    if (progress >= totalComparisons) {\n      goBackOrHome(history);\n    }\n  }, [history, progress, totalComparisons])\n\n  React.useEffect(() => {\n    const { nextIndex, nextPair } = randomNextPair(voteQueue);\n    setPairIndex(nextIndex);\n    setPair(nextPair);\n    setReverseOrder(flipCoin());\n  }, [voteQueue]);\n\n\n  if (!getCurrentProfile(state)) {\n    console.warn('Whoops! No profile selected!');\n    history.replace(selectProfileRoute);\n    return null;\n  }\n\n  return (\n    pair ?\n      <PairVoteComponent\n        {...props}\n        pairIndex={pairIndex}\n        leftBallot={reverseOrder ? pair.right : pair.left}\n        rightBallot={reverseOrder ? pair.left : pair.right}\n        skippedCount={pair.skipped}\n        progress={progress}\n        totalComparisons={totalComparisons}\n      /> :\n      null\n  );\n}\n\nexport default PairVoteContainer;\n","import PairVoteContainer from './PairVoteContainer';\n\nexport default PairVoteContainer;\n","import styled from 'styled-components';\nimport { breakPoint } from 'components/common/common.style';\n\nexport const ListContainer = styled.div`\n  display: flex;\n  align-content: space-between;\n  flex-direction: column;\n  align-items: center;\n  margin: 1rem 0;\n  width: 80%;\n  max-width: 100%;\n\n  ${breakPoint.mediumAndSmaller} {\n    width: 100%;\n  }\n`;\n\nexport const ProgressContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  margin: 1rem 0;\n`;\n","/**\n * Modified from: https://material-ui.com/components/tables/#sorting-amp-selecting\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Checkbox,\n  TableCell,\n  TableHead,\n  TableRow,\n  TableSortLabel,\n} from '@material-ui/core';\n\n/**\n *\n * @param {{\n    headCells: [TableData]\n    classes: object\n    onSelectAllClick: Function,\n    order: string,\n    orderBy: string,\n    numSelected: number,\n    rowCount: number\n    onRequestSort: Function\n  }} props\n */\nconst EnhancedTableHead = (props) => {\n  const {\n    headCells,\n    classes,\n    onSelectAllClick,\n    order,\n    orderBy,\n    numSelected,\n    rowCount,\n    onRequestSort\n  } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\">\n          <Checkbox\n            indeterminate={numSelected > 0 && numSelected < rowCount}\n            checked={rowCount > 0 && numSelected === rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{ 'aria-label': 'select all items' }}\n          />\n        </TableCell>\n        {headCells.map((headCell) => (\n          <TableCell\n            key={headCell.id}\n            align={headCell.numeric ? 'right' : 'left'}\n            padding={headCell.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === headCell.id ? order : false}\n          >\n            {\n              headCell.sortable ?\n                (<TableSortLabel\n                  active={orderBy === headCell.id}\n                  direction={orderBy === headCell.id ? order : 'asc'}\n                  onClick={createSortHandler(headCell.id)}\n                >\n                  {headCell.label}\n                  {orderBy === headCell.id ? (\n                    <span className={classes.visuallyHidden}>\n                      {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                    </span>\n                  ) : null}\n                </TableSortLabel>) :\n                headCell.label\n            }\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n};\n\nEnhancedTableHead.propTypes = {\n  headCells: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    numeric: PropTypes.bool.isRequired,\n    disablePadding: PropTypes.bool.isRequired,\n    label: PropTypes.string.isRequired,\n    sortable: PropTypes.bool.isRequired,\n  })),\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\nexport default EnhancedTableHead;\n","/**\n * Modified from: https://material-ui.com/components/tables/#sorting-amp-selecting\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport {\n  IconButton,\n  TextField,\n  Toolbar,\n  Tooltip,\n  Typography,\n} from '@material-ui/core';\nimport {\n  ImportExport as ImportExportIcon,\n  Delete as DeleteIcon,\n  Done as DoneIcon,\n  Edit as EditIcon,\n} from '@material-ui/icons';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n  },\n  highlight: {\n    borderRadius: '1rem',\n    color: theme.palette.secondary.main,\n    backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n    paddingLeft: theme.spacing(3),\n    paddingRight: theme.spacing(1),\n  },\n  title: {\n    flex: '1 1 100%',\n    flexDirection: 'column'\n  },\n  input: {\n    margin: '0 1rem'\n  }\n}));\n\n/**\n * Creates title of the table OR the toolbar when in select mode.\n *\n * @param {{\n  *  numSelected: number,\n  *  title: string,\n  *  rankRange: {start, end},\n  *  onRankRangeChange: Function,\n  *  onExportRows: Function,\n  *  onClearRows: Function,\n  * }} props\n  */\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const {\n    title,\n    numSelected,\n    rankRange,\n    onRankRangeChange,\n    onExportRows,\n    onClearRows\n  } = props;\n\n  const editButtonText = \"Edit Ranges\";\n  const doneButtonText = \"Done\";\n\n  const isSelectMode = numSelected > 0;\n  const [isEditMode, setIsEditMode] = React.useState(false);\n\n  /**\n   * Creates a lambda for the onChange event.\n   * Includes safety for preventing letter inputs\n   * (firefox will set the value as blank even with type number).\n   *\n   * @param {{start: boolean, end: boolean}} param0\n   */\n  const createChangeHandler = ({ start, end }) => (event) => {\n    const value = event.target.value\n    if (isNaN(value) || value === \"\") {\n      return;\n    }\n    onRankRangeChange({\n      start: Number(start === true ? value : rankRange.start),\n      end: Number(end === true ? value : rankRange.end),\n    });\n  };\n\n  return (\n    <Toolbar\n      className={clsx(classes.root, {\n        [classes.highlight]: isSelectMode,\n      })}\n    >\n      {isSelectMode ? (\n        <>\n          <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\n            {numSelected} selected\n          </Typography>\n          <Tooltip title=\"Export rows\">\n            <IconButton aria-label=\"Export rows\" onClick={onExportRows}>\n              <ImportExportIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Clear rows\">\n            <IconButton aria-label=\"Clear rows\" onClick={onClearRows}>\n              <DeleteIcon />\n            </IconButton>\n          </Tooltip>\n        </>\n      ) : (\n          isEditMode ? (\n            <>\n              <div className={classes.title}>\n                <TextField\n                  id=\"start-range\"\n                  className={classes.input}\n                  label=\"Rank Start\"\n                  type=\"number\"\n                  defaultValue={rankRange.start}\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  onChange={createChangeHandler({ start: true })}\n                />\n                <TextField\n                  id=\"end-range\"\n                  className={classes.input}\n                  label=\"Rank End\"\n                  type=\"number\"\n                  defaultValue={rankRange.end}\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  onChange={createChangeHandler({ end: true })}\n                />\n              </div>\n              <Tooltip title={doneButtonText}>\n                <IconButton\n                  aria-label={doneButtonText}\n                  onClick={() => setIsEditMode(false)}\n                >\n                  <DoneIcon />\n                </IconButton>\n              </Tooltip>\n            </>\n          ) :\n            (\n              <>\n                <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\n                  {title}\n                </Typography>\n                <Tooltip title={editButtonText}>\n                  <IconButton\n                    aria-label={editButtonText}\n                    onClick={() => setIsEditMode(true)}\n                  >\n                    <EditIcon />\n                  </IconButton>\n                </Tooltip>\n              </>\n            )\n        )\n      }\n    </Toolbar >\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  rankRange: PropTypes.shape({\n    start: PropTypes.number.isRequired,\n    end: PropTypes.number.isRequired\n  }),\n  onRankRangeChange: PropTypes.func.isRequired,\n  onExportRows: PropTypes.func.isRequired,\n  onClearRows: PropTypes.func.isRequired\n};\n\nexport default EnhancedTableToolbar;\n","import styled from 'styled-components';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  container: {\n    minHeight: 200,\n    maxHeight: 440,\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n    borderRadius: '1rem'\n  },\n  table: {\n    minWidth: 200,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n}));\n\nexport const RowImage = styled.img`\n  width: 100%;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Checkbox,\n  TableCell,\n  TableRow,\n} from '@material-ui/core';\nimport {\n  RowImage,\n} from './ResultTable.style';\n\n\nconst ResultTableCellComponent = ({\n  headCell,\n  row,\n  labelId,\n  rank\n}) => {\n  const outRow = { ...row, rank };\n  const { id, numeric } = headCell;\n  const isName = id === 'name';\n  const isImg = id === 'image';\n  // We want name to be the field to grow.\n  const width = isName ? null :\n    (isImg ? 100 : 30);\n\n  return (\n    <TableCell\n      align={numeric ? 'right' : 'left'}\n      id={isName ? labelId : null}\n      component={isName ? 'th' : null}\n      scope={isName ? 'row' : null}\n      width={width}\n    >\n      {\n        isImg ?\n          (outRow.image && <RowImage\n            src={outRow.image}\n            alt={outRow.name}\n          />) :\n          outRow[id]\n      }\n    </TableCell>\n  );\n};\n\nResultTableCellComponent.propTypes = {\n  headCell: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    numeric: PropTypes.bool.isRequired,\n    disablePadding: PropTypes.bool.isRequired,\n    label: PropTypes.string.isRequired,\n  }),\n  row: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    image: PropTypes.string.isRequired,\n    score: PropTypes.number.isRequired,\n  }),\n  labelId: PropTypes.string.isRequired,\n  rank: PropTypes.string.isRequired,\n};\n\n/**\n * Renders each row of the result table; deciding values and layout.\n *\n * @param {{\n *  headCells: [TableData],\n *  row: string,\n *  labelId: string,\n *  isItemSelected: boolean,\n *  handleClick: Function,\n *  rank: string,\n * }} props\n */\nconst ResultTableRowComponent = ({\n  headCells,\n  row,\n  labelId,\n  isItemSelected,\n  handleClick,\n  rank,\n}) => {\n  return (\n    <TableRow\n      hover\n      onClick={(event) => handleClick(event, row.id)}\n      role=\"checkbox\"\n      aria-checked={isItemSelected}\n      tabIndex={-1}\n      key={row.id}\n      selected={isItemSelected}\n    >\n      <TableCell padding=\"checkbox\">\n        <Checkbox\n          checked={isItemSelected}\n          inputProps={{ 'aria-labelledby': labelId }}\n        />\n      </TableCell>\n      {headCells.map((headCell) => (\n        <ResultTableCellComponent\n          key={`${headCell.id}-${row.id}`}\n          headCell={headCell}\n          row={row}\n          labelId={labelId}\n          rank={rank}\n        />\n      ))}\n    </TableRow>\n  );\n};\n\nResultTableRowComponent.propTypes = {\n  headCells: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    numeric: PropTypes.bool.isRequired,\n    disablePadding: PropTypes.bool.isRequired,\n    label: PropTypes.string.isRequired,\n  })),\n  row: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    image: PropTypes.string.isRequired,\n    score: PropTypes.number.isRequired,\n  }),\n  labelId: PropTypes.string.isRequired,\n  isItemSelected: PropTypes.bool.isRequired,\n  handleClick: PropTypes.func.isRequired,\n  rank: PropTypes.string.isRequired,\n};\n\nexport default ResultTableRowComponent;\n","/**\n * Modified from: https://material-ui.com/components/tables/#sorting-amp-selecting\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Paper,\n  Table,\n  TableBody,\n  TableContainer,\n  TablePagination,\n} from '@material-ui/core';\nimport { exportCsv } from 'lib/export';\nimport EnhancedTableHead from './EnhancedTableHeadComponent';\nimport EnhancedTableToolbar from './EnhancedTableToolbarComponent';\nimport ResultTableRow from './ResultTableRowComponent';\nimport {\n  useStyles,\n} from './ResultTable.style';\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\n/**\n * Expected structure of the table data.\n * @typedef {{\n  * id: string,\n  * rank: number,\n  * name: string,\n  * image: string,\n  * score: number }} TableData\n  */\n\n/**\n * Correlates to `createRowData()`.\n * Ranks is calculated later.\n */\nconst headCells = [\n  { id: 'score', numeric: true, disablePadding: true, label: 'Score', sortable: true },\n  { id: 'image', numeric: false, disablePadding: false, label: 'Image', sortable: false },\n  { id: 'name', numeric: false, disablePadding: true, label: 'Name', sortable: true },\n  { id: 'rank', numeric: true, disablePadding: false, label: 'Rank', sortable: false },\n];\n\nconst rowsPerPageOptions = [10, 25, 100, 1000];\n\n/**\n * Creates the enhanced table with sortable headers, defined order,\n * and selectable rows.\n *\n * @param {{\n *  title: string,\n *  rows: [{id: string, name: string, image: string, score: number}]\n *  headCells: [TableData],\n *  defaultOrder: string,\n *  defaultOrderBy: string,\n *  defaultRowCount: number,\n *  maxScore: number,\n *  onClearRows: Function.\n * }} props\n */\nconst EnhancedTable = (props) => {\n  const {\n    title,\n    rows,\n    defaultOrderBy,\n    defaultOrder,\n    defaultRowCount,\n    maxScore,\n    onClearRows\n  } = props;\n  const classes = useStyles();\n  const [order, setOrder] = React.useState(defaultOrder);\n  const [orderBy, setOrderBy] = React.useState(defaultOrderBy);\n  const [selected, setSelected] = React.useState([]);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(defaultRowCount);\n  const [rankStart, setRankStart] = React.useState(1);\n  const [rankEnd, setRankEnd] = React.useState(10);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelecteds = rows.map((n) => n.id);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (event, id) => {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1),\n      );\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const isSelected = (id) => selected.indexOf(id) !== -1;\n\n  /**\n   * @param {number} score\n   * @return {string} The formatted rank.\n   */\n  const calculateRank = (score) => {\n    const rankOffset = rankStart;\n    const rankValueRange = rankEnd - rankStart;\n    const scorePercent = score / maxScore || 0;\n    const rank = rankValueRange * scorePercent + rankOffset;\n    const fixedDecimal = 2;\n    const rankRounded = Math.round((rank + Number.EPSILON) * 100) / 100;\n    return rankRounded.toFixed(fixedDecimal);\n  };\n\n  /**\n   * @return {[[string]]} An array of array of strings.\n   * In the order of `headerCells`, filtered with `isSelected`.\n   */\n  const filterSelectedRows = () => {\n    const header = headCells.map((column) => column.label);\n    let filteredRows = stableSort(rows, getComparator(order, orderBy))\n      .filter((value) => isSelected(value.id))\n      .map((row) => headCells.map((column) => (\n        column.id === 'rank' ? calculateRank(row.score) : row[column.id]\n      )));\n    filteredRows.unshift(header);\n    return filteredRows;\n  };\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <EnhancedTableToolbar\n          title={title}\n          numSelected={selected.length}\n          rankRange={{ start: rankStart, end: rankEnd }}\n          onRankRangeChange={({ start, end }) => {\n            setRankStart(start);\n            setRankEnd(end);\n          }}\n          onExportRows={() => {\n            const filtered = filterSelectedRows();\n            exportCsv(filtered, '\\t', title);\n          }}\n          onClearRows={() => {\n            onClearRows(selected);\n          }}\n        />\n        <TableContainer className={classes.container}>\n          <Table\n            stickyHeader\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              classes={classes}\n              numSelected={selected.length}\n              order={order}\n              orderBy={orderBy}\n              onSelectAllClick={handleSelectAllClick}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n              headCells={headCells}\n            />\n            <TableBody>\n              {stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  const isItemSelected = isSelected(row.id);\n                  const labelId = `enhanced-table-checkbox-${index}`;\n\n                  return (\n                    <ResultTableRow\n                      key={labelId}\n                      headCells={headCells}\n                      row={row}\n                      labelId={labelId}\n                      isItemSelected={isItemSelected}\n                      handleClick={handleClick}\n                      rank={calculateRank(row.score)}\n                    />\n                  );\n                })}\n\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <TablePagination\n          rowsPerPageOptions={rowsPerPageOptions}\n          component=\"div\"\n          count={rows.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n      </Paper>\n\n    </div >\n  );\n}\n\nEnhancedTable.propTypes = {\n  rows: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    image: PropTypes.string.isRequired,\n    score: PropTypes.number.isRequired,\n  })),\n  maxScore: PropTypes.number.isRequired,\n  defaultOrder: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  defaultOrderBy: PropTypes.oneOf([\n    'name', 'score'\n  ]).isRequired,\n  defaultRowCount: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  onClearRows: PropTypes.func.isRequired,\n};\n\nexport default EnhancedTable;\n","import ResultTableComponent from './ResultTableComponent.js';\n\nexport default ResultTableComponent;\n","const csvHeader = \"data:text/csv;charset=utf-8,\";\n\n/**\n * Generates the CSV content from rows.\n * Then uses a hidden element to prompt the CSV.\n *\n * @param {[[string]]} rows An array of arrays\n * @param {string} delimiter\n * @param {string} title Function will append .csv\n * @throws Error If there's a mismatched row\n */\nexport const exportCsv = (rows, delimiter, title) => {\n  let rowWidth = 0;\n  const csvContent = csvHeader + rows.map((row, index) => {\n    if (!rowWidth) {\n      rowWidth = row.length;\n    }\n    if (rowWidth !== row.length) {\n      throw new Error(\n        `Mismatched length; expected ${rowWidth} received ${row.length} ` +\n        `at row ${index}`\n      );\n    }\n    return row.join(delimiter);\n  }).join('\\r\\n');\n\n  const hiddenElement = document.createElement('a');\n  hiddenElement.href = encodeURI(csvContent);\n  hiddenElement.target = '_blank';\n\n  //provide the name for the CSV file to be downloaded\n  hiddenElement.download = `${title}.csv`;\n  hiddenElement.click();\n};\n","import React from 'react';\nimport {\n  ProfileContext,\n  getCurrentProfile,\n  getListValues,\n  getMaxScore,\n  getProgress,\n  getTotalComparisons,\n} from 'contexts/Profile';\nimport { asyncResetListRows } from 'contexts/Profile/middleware';\nimport {\n  selectProfileRoute,\n  voteOnPairs\n} from 'app/routes';\nimport {\n  PrimaryButton,\n  CancelButton\n} from 'components/common/common.style';\nimport LinearProgressBar from 'components/common/LinearProgressBar';\nimport {\n  ListContainer,\n  ProgressContainer,\n} from './ViewList.style';\nimport ResultTable from './ResultTable'\n\nconst defaultOrderBy = 'score';\nconst defaultOrder = 'desc';\nconst defaultRowCount = 25;\n\nconst resultsStartTitle = ': Ready to start!';\nconst resultsPartial = '(Partial)';\nconst resultsFinal = '(Results)';\n\nfunction ViewListComponent({ history }) {\n  const { state, dispatch } = React.useContext(ProfileContext);\n  const profile = getCurrentProfile(state);\n  console.log(state);\n\n  if (!profile) {\n    console.warn('Whoops! No profile selected!');\n    history.replace(selectProfileRoute);\n    return null;\n  }\n\n  const progress = getProgress(state);\n  const totalComparisons = getTotalComparisons(state);\n  const maxScore = getMaxScore(state);\n  const listRows = getListValues(state);\n\n  const resultsTitleSuffix = progress ?\n    (progress >= totalComparisons ? resultsFinal : resultsPartial) :\n    resultsStartTitle;\n  const resultsTitle = `${profile.name} ${resultsTitleSuffix}`;\n\n  return (\n    <ListContainer>\n      <ProgressContainer>\n        <LinearProgressBar\n          value={progress}\n          total={totalComparisons}\n        />\n        {\n          (progress < totalComparisons) &&\n          (<PrimaryButton\n            onClick={() => history.push(voteOnPairs)}\n          >\n            {progress ? 'Continue' : 'Start'}\n          </PrimaryButton>)\n        }\n\n      </ProgressContainer>\n\n      <ResultTable\n        rows={listRows}\n        maxScore={maxScore}\n        defaultOrderBy={defaultOrderBy}\n        defaultOrder={defaultOrder}\n        defaultRowCount={defaultRowCount}\n        title={resultsTitle}\n        onClearRows={(listIds) => (\n          // TODO add spinner.\n          asyncResetListRows({ state, dispatch }, listIds)\n        )}\n      />\n      <CancelButton\n        onClick={() => history.replace(selectProfileRoute)}\n      >\n        Switch Profiles\n      </CancelButton>\n    </ListContainer>\n  );\n}\n\nexport default ViewListComponent;\n","import ViewListComponent from './ViewListComponent';\n\nexport default ViewListComponent;\n","import SelectProfile from 'components/SelectProfile';\nimport EditProfile from 'components/EditProfile';\nimport PairVote from 'components/PairVote';\nimport ViewList from 'components/ViewList';\n\n/**\n * See: react-router-dom\n * @typedef {{\n *  goBack: Function, replace: Function\n * }} history\n */\n\nexport const selectProfileRoute = '/';\nexport const editProfileRoute = '/edit-profile';\nexport const viewProfileList = '/list';\nexport const voteOnPairs = '/vote-pair';\nexport const homeRoute = selectProfileRoute;\n\n/**\n * @param {string} path\n * @param {JSX.Element} component\n * @return {{path: string, component: JSX.Element}}\n */\nconst routeComponent = (path, component) => ({ path, component });\n\n/**\n * Array of routes to their components.\n * (Array to guarantee order).\n */\nexport const routeList = [\n  routeComponent(voteOnPairs, PairVote),\n  routeComponent(viewProfileList, ViewList),\n  routeComponent(editProfileRoute, EditProfile),\n  routeComponent(selectProfileRoute, SelectProfile),\n];\n\n/**\n * Way to safely go back, regardless of where you start.\n *\n * @param {history} history\n */\nexport const goBackOrHome = (history) => {\n  if (history.length > 1) {\n    history.goBack();\n  } else {\n    history.replace(homeRoute);\n  }\n};\n","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport { } from 'react-transition-group';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport './App.css';\nimport { routeList } from './routes';\nimport { AppTheme } from 'components/common/common.style';\n\nfunction App() {\n  return (\n    <>\n      <div className=\"app\">\n        <div className=\"app-body\">\n          <ThemeProvider theme={AppTheme}>\n            <Router basename={process.env.PUBLIC_URL}>\n              <Switch>\n                {\n                  routeList.map(({ path, component }) => (\n                    <Route key={path} path={path} component={component} />\n                  ))\n                }\n              </Switch>\n            </Router>\n          </ThemeProvider>\n        </div>\n      </div>\n      <div className=\"build-info\">\n        Release: {process.env.BUILD_INFO}\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\n\nexport const AppContext = React.createContext();\n\n// TODO clean up the profile vs. Profile.js\nconst PROFILE_ADD = 'PROFILE/ADD';\nconst PROFILE_SET_CURRENT = 'PROFILE/SET_CURRENT';\n\n/**\n * React reducer action.\n * @typedef {{\n *  type: string, data: any\n * }} Action\n */\n\n/**\n * Dispatch action.\n *\n * @param {string} key\n * @return {Action}\n */\nexport const setCurrentProfile = (key) => ({\n  type: PROFILE_ADD,\n  data: key\n});\n\n/**\n * Dispatch action.\n *\n * @param {string} name\n * @param {string} key\n * @return {Action}\n */\nexport const addProfile = (name, key) => ({\n  type: PROFILE_ADD,\n  data: {\n    name,\n    key\n  }\n});\n\n/**\n * Base store.\n * @typedef {{\n  currentProfile: null,\n  profiles: {{name: string, key: string}}\n  * }} BaseState\n  */\nconst initialState = {\n  currentProfileKey: null,\n  profiles: []\n};\n\n\n/**\n *\n * @param {initialState} state\n * @param {Action} action\n * @return {initialState}\n */\nfunction reducer(state, action) {\n  switch (action.type) {\n    case PROFILE_ADD:\n      return {\n        ...state,\n        profiles: [...state.profiles, action.data]\n      };\n    case PROFILE_SET_CURRENT:\n      return {\n        ...state,\n        currentProfileKey: action.data\n      };\n    default:\n      return state;\n  }\n}\n\n/**\n * @returns {{ state: initialState, dispatch: (Action) => {}}}\n */\nexport function AppProvider(props) {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const value = { state, dispatch };\n\n  return (\n    <AppContext.Provider value={value}>\n      {props.children}\n    </AppContext.Provider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/App';\nimport reportWebVitals from './app/reportWebVitals';\nimport { AppProvider } from './contexts/App';\nimport { ProfileProvider } from './contexts/Profile';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider>\n      <ProfileProvider>\n        <App />\n      </ProfileProvider>\n    </AppProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}